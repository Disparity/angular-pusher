"use strict";!function(n){n.module("angular-pusher",[]).provider("pusher",[function(){var e=this,i={key:"",channels:[],options:{debug:!1,debounce:50,aliases:{}}};e.subscribe=n.bind(i.channels,i.channels.push),e.alias=function(e,o){return n.isObject(e)?void n.extend(i.options.aliases,e):void(i.options.aliases[e]=o)},e.option=function(o,t){if(n.isObject(o))for(var s in o)e.option(s,o[s]);else null===t&&delete i.options[o],i.options[o]=t},e.setApiKey=function(n){i.key=n||i.key},this.$get=["$pusher",function(o){var t=o(i.key,i.options);for(var s in i.channels)t.subscribe(i.channels[s]);return n.extend(e,{subscribe:n.bind(t,t.subscribe),option:function(e){return n.isString(e)?t.config[e]:null}}),t}]}]).service("$pusher",["$window","$rootScope","$timeout","$log",function(e,i,o,t){var s=null;return function(a,u){var c=u.debounce>0?n.bind(i,i.$digest):function(){s&&o.cancel(s),s=o(n.noop,u.debounce)["finally"](function(){s=null})},r=new e.Pusher(a,u);return r.connection.bind_all(function(n,e){u.debug&&t.debug([a,n,e])}),r.connection.bind_all(function(e,o){var t={name:e,data:o,key:a};switch(e){case"message":n.extend(t,{name:(o.channel?(u.aliases[o.channel]||o.channel)+":":"")+o.event,data:o.data});break;default:return}i.$broadcast(t.name,t.data),c()}),r}}]).run(["pusher",n.noop])}(window.angular);
