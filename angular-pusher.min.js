"use strict";!function(n){n.module("angular-pusher",[]).provider("pusher",[function(){var e=this,i={key:"",channels:[],options:{debug:!1,debounce:50},aliases:{}};e.subscribe=n.bind(i.channels,i.channels.push),e.alias=function(e,a){return n.isObject(e)?void n.extend(i.aliases,e):void(i.aliases[e]=a)},e.option=function(a,o){if(n.isObject(a))for(var s in a)e.option(s,a[s]);else null===o&&delete i.options[a],i.options[a]=o},e.setApiKey=function(n){i.key=n||i.key},this.$get=["$window",function(a){var o=new a.Pusher(i.key,i.options);o.channelAliases=i.aliases;for(var s in i.channels)o.subscribe(i.channels[s]);return n.extend(e,{subscribe:n.bind(o,o.subscribe),option:function(e){return n.isString(e)?o.config[e]:null}}),o}]}]).run(["pusher","$rootScope","$timeout","$log",function(e,i,a,o){var s=null,t=e.config.debounce>0?n.bind(i,i.$digest):function(){s&&a.cancel(s),s=a(n.noop,e.config.debounce)["finally"](function(){s=null})};e.connection.bind_all(function(a,s){e.config.debug&&o.debug([a,s]);var c={name:a,data:s};switch(a){case"message":n.extend(c,{name:(s.channel?(e.channelAliases[s.channel]||s.channel)+":":"")+s.event,data:s.data});break;default:return}i.$broadcast(c.name,c.data),t()})}])}(window.angular);